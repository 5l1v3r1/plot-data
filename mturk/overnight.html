<!-- For help on using this template, see the blog post: http://mechanicalturk.typepad.com/blog/2014/04/editing-the-survey-link-project-template-in-the-ui.html --><!-- Bootstrap v3.0.3 -->
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" />
<section class="container" id="SurveyLink" style="margin-bottom: 15px; padding: 10px; font-family: Verdana, Geneva, sans-serif; color: rgb(51, 51, 51);">
<div class="row col-xs-12 col-md-12"><!-- Instructions -->
<div class="panel panel-primary">
<div class="panel-heading" style="font-size: 0.9em;"><strong style="font-size: 0.9em;">Instructions</strong></div>

<div class="panel-body">
<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">The link will take you to a page containing some plots, you are to provide 5 labels by clicking on the &quot;<strong style="font-size: 13px;">Label</strong><span style="font-size: 13px;">&quot; button on top of each plot.</span></p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">There is another worker, and you want them to make &quot;New plot&quot; based on &quot;Current plot&quot;, what would you say? That is what you should write in the box.</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">Your command will be tested on another worker, and a bonus will be awarded if they succeed in picking out the target based on your command.&nbsp;</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">Finally, copy and paste the code once it appears and then submit.</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">When the difference is hard to see, open the label window and use the <strong>&quot;show new plot&quot; </strong>checkbox to switch between the old plot and the new plot.</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">Check and uncheck &quot;show new plot&quot; <strong>a&nbsp;few times for a visual contrast</strong>.&nbsp;Pay attention to spacing, paddings, fonts, etc&nbsp;which also counts as a difference.</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">If you really do not find any difference, click on the no change button. You are free to only describe those plots that have noticeable&nbsp;change and skip the rest.</p>

<p dir="ltr" style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">If you run out of plots to label before completing the task, click on &quot;<strong>Load more</strong>&quot; for a new set. You should also click on &quot;<strong>Load more&quot;&nbsp;</strong>if you feel you cannot provide a clear command for what is currently there.</p>

<p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt;">&nbsp;</p>

<p dir="ltr" style="line-height:1.38;margin-top:0pt;margin-bottom:0pt;"><strong>Do:</strong></p>

<ul dir="ltr">
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">Use &quot;show new plot&quot; tool to figure out exactly what happened</li>
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">Use simple&nbsp;language in&nbsp;a command form<span style="font-family: Verdana, Geneva, sans-serif;">: &quot;make the x label bigger</span><span style="font-family: Verdana, Geneva, sans-serif;">&quot;, &quot;move legend to the left&quot;</span></li>
</ul>

<p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><strong>Don&#39;t:</strong></p>

<ul dir="ltr" style="font-family: Verdana, Geneva, sans-serif;">
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">BAD: &quot;The new plot is bigger than the old one&quot;</li>
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">Do not refresh your browser, for you will lose your points. Use the &quot;load more&quot; button.</li>
</ul>

<p style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;"><strong>Notes</strong></p>

<ul>
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">You will be rejected and blocked if you spam or if you are marked as spamming by other workers when they try to perform your command</li>
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">In rare cases when less than 5 candidates show up, refresh the page and make sure your workerId is still in the URL</li>
	<li style="line-height: 1.38; margin-top: 0pt; margin-bottom: 0pt;">We are building up a list of good workers for more of these similar tasks at a higher pay</li>
</ul>
</div>
</div>
<!-- End Instruction -->

<div style="display: none;">${hitid}</div>

<div id="myelementLink" style="font-size: 0.9em; display: inline;"><tt>URL not shown because there is an error with Javascript on your computer. To perform this HIT, you must have Javascript and cookies enabled on your browser.</tt></div>

<div style="font-size: 0.9em;"><strong>&nbsp;Please copy your completion code from the task window,&nbsp; paste below and submit</strong></div>

<div><textarea class="form-control" cols="80" id="code" name="code" rows="1" type="text"></textarea></div>
<script type="text/javascript" language="JavaScript">
var assignment_id_field = document.getElementById('myelementLink');
var paramstr = window.location.search.substring(1);
var parampairs = paramstr.split("&");
var mturkworkerID = "";
var assID = "";
var hitID = "";
for (i in parampairs) {
  var pair = parampairs[i].split("=");
  if (pair[0] == "workerId")
    mturkworkerID = pair[1];
  else if (pair[0] == "assignmentId")
    assID = pair[1];
  else if (pair[0] == "hitId")
    hitID = pair[1];
}
var sessionId = mturkworkerID + '_' + assID
if (mturkworkerID == "")
  assignment_id_field.innerHTML = 'Your workderId is not present, you must first accept the task and not mess with the URL.';
else
  assignment_id_field.innerHTML = '<a target="_blank" href="http://plot.sidaw.xyz/#/label/build?uid=' + sessionId + '"><h1><span style="color: rgb(255, 0, 0);font-size:30"><span><b>Start task.</b></span></span></h1></a>';

window.onload = function() {document.getElementById('submitButton').setAttribute('onclick', 'return validateCode()'); }
function validateCode() {
  document.getElementById('code').value = document.getElementById('code').value.trim();
  var code = document.getElementById('code').value;
	try {
  	codeobj = JSON.parse(atob(code));
  } catch (parseError) {
		window.alert('incorrect code, make sure you copy the entire thing and remove spaces')
		return false;
  }
  console.log(code, codeobj);
  if (codeobj.sessionId && codeobj.sessionId===sessionId) {
		console.log('the code is good')
		return true;
	} else {
		window.alert('incorrect code, make sure you copy the entire thing and remove spaces')
    return false;
  }
}
</script></div>
</section>
